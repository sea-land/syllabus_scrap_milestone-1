# README.md

## はじめに

このリポジトリは早稲田大学のシラバスをスクレイピングし、整形された形で出力するためのものです。
このマニュアルは、コンピュータに関する事前知識が全くない方や、環境設定を全くしていない方も対象としています。Mac と Windows の両方に対応しています。

**最終更新日時: 2024 年 8 月 17 日**

## 手順

### 1. Docker デスクトップをインストール

1. [Docker Desktop](https://www.docker.com/products/docker-desktop/)の公式サイトにアクセスします。
2. ダウンロードボタンをクリックし、インストールファイルをダウンロードします。
3. ダウンロードしたファイルをダブルクリックしてインストールを開始します。
4. インストールが完了したら、Docker Desktop を起動します。

### 2. GitHub アカウントを作成

1. [GitHub](https://github.com/)の公式サイトにアクセスします。
2. 画面右上の「Sign up」ボタンをクリックします。
3. 必要な情報を入力してアカウントを作成します。
4. メールアドレスの確認が求められるので、指示に従って確認を完了させます。

### 3. このプロジェクトをダウンロード (GitHub の使い方がわかる人は git clone で大丈夫です)

1. このページ上部の緑色で<span style="color: green;">Code</span>と書かれているボタンをクリックします。
2. Download Zip をクリックします。
3. Windows ならエクスプローラー、Mac ならファインダーでダウンロードした Zip ファイルを解凍します。（大抵はダブルクリックで解凍されます）
4. 解凍したフォルダ(.zip ではない)のパスをコピーします。以下手順です。
   #### Windows
   エクスプローラーで解凍したフォルダ(zip でない)を右クリック　 → 　パス名をコピーというボタンをクリック
   #### Mac
   ファインダーで解凍したフォルダ(zip ではない)を右クリック(トラックパッドなら二本指でクリック)　 → 　 option キーを押すとパス名をコピーというボタンが出現するのでクリック
5. Mac ならターミナル、Windows ならパワーシェルを実行してください。(デフォルトでパソコンにインストールされています)
6. ターミナルで出てきた画面に以下のコマンドを打ち込んで Enter で実行します

```bash
  cd [4.でコピーしたパス名]
```

7. ls というコマンドを実行して結果が以下のようになっていれば大成功です。出力結果が違う場合は 4.からやり直してください。

```bash
❯ ls
README.md		docker-compose.yml   py_context		work
```

### 4. プログラムを起動

1. そのまま 以下のコマンドを実行します。
   ```bash
   docker-compose up -d
   ```
2. これにより、プログラムがバックグラウンドで起動します。これでスクレイピングは開始されました。

### 5. `app.log`のログを確認(Mac のみ)

1. 以下のコマンドでログファイルを表示します。ログファイルは定期的に更新されますのでそのまま待っていてください。
   ```bash
   tail -f work/app.log
   ```
2. `==========Scraping started==========`というメッセージが表示され、スクレイピングが開始されたことを確認します。
3. `==========Scraping completed==========`というメッセージが表示され、スクレイピングが完了したことを確認します。
4. ログに`ERROR`が含まれている箇所は出力データに載っていないのでエラーメッセージを確認して必要であれば手動で追加してください。

### 6. 結果の確認

1. スクレイピングの結果は、`data/出力年月/{forWin or forMac}/syllabus_data{学部}.csv`ファイルに出力されます。(約 5 分かかります)
2. data という名前のファイルを開いて結果を確認してください。

---

以上の手順に従って設定を完了し、スクレイピングを実行してください。手順通りに進めれば必ずできるはずなので何かエラーが起きたとしても焦らずにもう一度やってみましょう。

### 7. トラブルシューティング

1 番の原因は「ネットワーク環境」です。
Docker は PC の環境に依存しない(mac であろうが、windows であろうが、どんな OS のバージョンでも変わらない)ので、基本は動きます。

### 8. 出力データとアルゴリズム

1. forMac(utf-8) forWin(utf-8-sig)は文字コードが違うため自身のパソコンで文字化けしないほうを利用して下さい
2. 出力データは csv ファイルです。このファイルは excel で開くことができます。
3. 出力時のデータは["学部", "コースコード", "カテゴリ", "科目名", "カモクメイ", "担当教員", "学期", "曜日時限", "授業形式", "授業概要"]となっています。カテゴリは理工 3 学部のみ入力されます。ただし、理工の一部 C 群、D 群、英語コースは入力されずに空欄のまま出力されます。
4. 担当教員は/の数を数えて 2 つ以上ならオムニバスと書き換えてあります。1 つの場合は/を・に自動で置き換えます。
5. 担当教員の名前がすべてカタカナの場合はスペースを.で置き換えます。
6. 授業形式はコースコードの末尾のアルファベットを取得して自動入力されます。
